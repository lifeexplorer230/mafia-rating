# Система Рейтинга Мафии v2

Консольное Python-приложение для автоматического подсчета рейтинговых баллов игроков после партии в "Мафию".

## Возможности

- ✅ Автоматическое определение победителя
- ✅ Распознавание угадайки
- ✅ Подсчет чистой победы мирных
- ✅ Подсчет победы мафии в сухую
- ✅ Учет проверок Шерифа (черные/красные)
- ✅ Детализированный расчет баллов для каждого игрока

## Установка и запуск

```bash
cd /root/mafia-rating
python3 main.py
```

## Использование

При запуске программа попросит ввести данные по каждому игроку:

1. **Имя** - имя игрока
2. **Роль** - выбор: 1-Мирный, 2-Мафия, 3-Дон, 4-Шериф
3. **Когда убит** - формат: `0` (жив), `1D` (день 1), `2N` (ночь 2) и т.д.
4. **Проверки** (только для Шерифа) - имена через запятую

Для завершения ввода оставьте имя пустым.

## Пример

```
--- Игрок 1 ---
Имя: Иван
Роль (1-Мирный, 2-Мафия, 3-Дон, 4-Шериф): 1
Когда убит (0-жив, 1D/1N/2D/2N...): 0

--- Игрок 2 ---
Имя: Мария
Роль (1-Мирный, 2-Мафия, 3-Дон, 4-Шериф): 3
Когда убит (0-жив, 1D/1N/2D/2N...): 2D

--- Игрок 3 ---
Имя: Петр
Роль (1-Мирный, 2-Мафия, 3-Дон, 4-Шериф): 4
Когда убит (0-жив, 1D/1N/2D/2N...): 0
Кого проверил (имена через запятую): Мария,Сергей

...
```

## Тестирование

Запустить автоматические тесты:

```bash
python3 test_game.py
```

## Правила начисления баллов

| Условие | Баллы |
|---------|-------|
| Победа за Мирного | +4 |
| Чистая победа за Мирного | +1 |
| Победа за Мафию | +5 |
| Победа за Мафию в «сухую» | +1 |
| Победа за Дона | +3 |
| Победа за Дона, не покидая стола | +1 |
| Поражение за Дона | -3 |
| Победа за Шерифа | +3 |
| Победа за Шерифа, не покидая стола | +2 |
| Поражение за Шерифа | -3 |
| Шериф покинул игру в 1-й или 2-й день | -1 |
| Победа за Мирного в угадайке | +2 |
| Победа за Мафию в угадайке | +3 |
| 3 черные проверки Шерифа | +3 |
| 3 красные проверки Шерифа | +2 |

## Структура проекта

```
mafia-rating/
├── main.py              # Точка входа
├── models.py            # Модели данных
├── game_analyzer.py     # Анализ игры
├── rating_calculator.py # Подсчет баллов
├── input_handler.py     # Ввод данных
├── output_formatter.py  # Вывод результатов
├── test_game.py         # Автотесты
└── README.md            # Документация
```

## Автор

Создано для клуба "Мафия Рейтинг"
